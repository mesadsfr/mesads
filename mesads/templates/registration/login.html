{% extends "base.html" %}

{% block body %}
  <h1>Connexion à votre compte MesADS</h1>

  <div class="fr-grid-row alternatives">
    <div class="fr-col-12 fr-col-md-6 alternative fr-p-3w">
      <h4>Vous avez déjà un compte</h4>

      {% if next and user.is_authenticated %}
        <div class="fr-input-group fr-input-group--error">
          <p class="fr-error-text">
            Votre compte n'a pas les permissions nécessaires pour accéder à cette
            page. Pour poursuivre, veuillez vous connecter à un compte avec
            suffisamment de permissions.
          </p>
        </div>
      {% endif %}

      <form method="post" action="{% url 'login' %}">
        {% csrf_token %}

        <!-- Username -->
        <div class="fr-input-group{% if form.errors.username %} fr-input-group--error{% endif %}">
          <label
            class="fr-label"
            for="{{ form.username.name }}"
          >
            {{ form.username.label }} :
          </label>

          <input
            class="fr-input{% if form.errors.username %} fr-input--error{% endif %}"
            type="text"
            id="{{ form.username.name}}"
            name="{{ form.username.name }}"
            value="{{ form.username.value|default:"" }}"
          />

          {% for error in form.errors.username %}
          <p class="fr-error-text">
            {{ error }}
          </p>
          {% endfor %}
        </div>

        <!-- Password -->
        <div class="fr-input-group{% if form.errors.password %} fr-input-group--error{% endif %}">
          <label
            class="fr-label"
            for="{{ form.password.name }}"
          >
            {{ form.password.label }} :
          </label>

          <input
            class="fr-input{% if form.errors.password %} fr-input--error{% endif %}"
            type="password"
            id="{{ form.password.name}}"
            name="{{ form.password.name }}"
            value="{{ form.password.value|default:"" }}"
          />

          {% for error in form.errors.password %}
          <p class="fr-error-text">
            {{ error }}
          </p>
          {% endfor %}
        </div>

        {% if form.non_field_errors %}
          <div class="fr-input-group fr-input-group--error">
            {% for error in form.non_field_errors %}
            <!-- Non-field error -->
            <p class="fr-error-text">
              {{ error }}
            </p>
            {% endfor %}
          </div>
        {% endif %}

        <input type="hidden" name="next" value="{{ next }}">

        <div class="fr-input-group">
          <button type="submit" class="fr-btn">Se connecter</button>
        </div>

        <p>
          <a href="{% url 'password_reset' %}">Mot de passe perdu?</a>
        </p>

      </form>

    </div>

    <div class="fr-col-12 fr-col-md-6 alternative fr-p-3w">
      <h4>Vous n'avez pas de compte</h4>

      <p>
        Un compte est nécessaire pour vous connecter sur MesADS. En cliquant sur le bouton ci-dessous, vous pourrez choisir un email, un mot de passe et une autorité créatrice d'ADS (EPCI, Commune ou Préfecture).
      </p>

      <p>
        L'administrateur de l'autorité devra ensuite valider votre compte.
      </p>

      <a class="fr-btn" href="{% url 'register' %}">Créer un compte</a>
    </div>
  </div>
{% endblock %}
